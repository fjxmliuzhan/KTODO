# 双人协同 Todo 系统 PRD

## 背景
传统 Todo 系统是个人管理工具，但很多场景下，两个人需要协作完成共同任务。比如：
- 情侣/好友一起规划旅行
- 两人分担家务
- 搭子一起完成某个目标（健身、学习）

现有的解决方案通常是建群、建共享文件，太重了。需要一个轻量的两人协作工具。

## 目标用户
- 有共同任务的朋友/伴侣（2人协作）
- 需要"分担/共享任务"的场景
- 想要简单、轻量的工具（不是团队协作平台）

## 核心概念

**主界面（自己的看板）**：
- 显示自己的任务
- 显示每个好友的共享看板入口（默认折叠）
- 点好友名字 → 展开两人间的共享看板

**双人共享看板**：
- 两人共同的任务列表
- 两人在这里都能增删改查任务
- 任务状态实时同步
- 已完成任务"软删除"（留在列表，用删除效果），排在未完成任务后面

## 核心功能

### 1. 基础 Todo 功能
- 创建、编辑、删除任务
- 标记完成/未完成
- 任务优先级
- **标签管理**：用户自己创建标签，任务可打多个标签

### 2. 标签管理
- 创建自定义标签（如"旅行"、"家务"、"工作"）
- 任务可关联多个标签
- 按标签筛选任务

### 3. 好友管理
- 发送好友请求（发送好友 ID/搜索）
- 好友请求确认（双向确认机制）
- 查看好友列表
- 删除好友

### 4. 主界面设计
- **个人任务区**：显示自己的所有任务
- **好友共享看板区**：每个好友一行，显示好友名字 + 预览信息（如"3个任务"），默认折叠
- 点击好友名字 → 展开该好友的共享看板

### 5. 双人共享看板（核心功能）
- 显示两人共享的所有任务
- 两人在这里都能：
  - 创建新任务
  - 编辑任务
  - 删除任务
  - 标记完成/未完成
  - 打标签
- 任务实时同步（一人修改，另一人立即看到）

### 6. 任务排序与筛选
- **排序方式**：
  - 按创建时间
  - 按优先级
  - 按完成状态
- **已完成任务**：用"删除效果"（如灰色、虚化、删除线），排在未完成任务后面
- **按标签筛选**：点击标签筛选相关任务

### 7. 实时同步
- 好友更新任务时，自己实时看到变化
- 好友创建/删除任务时，自己实时看到变化

## 非功能需求
- 性能：页面加载 < 2秒，实时同步延迟 < 1秒
- 兼容性：支持 Chrome/Safari 最新版 + 移动端浏览器
- 隐私：只能看共享看板，不能看对方个人任务

## 技术栈（建议）
- 前端：Next.js + Tailwind CSS
- 后端：无服务器函数（Vercel）
- 实时同步：WebSocket 或 Server-Sent Events
- 数据存储：Supabase / Vercel Postgres
- 部署：Vercel

## 验收标准
- [ ] 用户能创建、编辑、删除个人任务
- [ ] 用户能创建自定义标签，给任务打标签
- [ ] 用户能发送好友请求，好友能确认
- [ ] 主界面显示个人任务 + 好友共享看板入口（折叠）
- [ ] 点击好友名字 → 展开两人共享看板
- [ ] 在共享看板中能创建、编辑、删除任务
- [ ] 在共享看板中能标记任务完成/未完成
- [ ] 在共享看板中能给任务打标签
- [ ] 已完成任务用删除效果显示，排在未完成任务后面
- [ ] 能按创建时间/优先级/完成状态排序
- [ ] 能按标签筛选任务
- [ ] 好友在共享看板操作任务时，自己实时看到变化
- [ ] 移动端基本可用

## MVP（最小可行产品）范围

### v1.0
- 基础 Todo CRUD
- 标签管理（创建标签、任务打标签、按标签筛选）
- 好友添加（双向确认）
- 主界面：个人任务 + 好友共享看板入口（折叠）
- 双人共享看板：两人都能增删改查任务
- 实时同步任务状态
- 已完成任务删除效果 + 排序

### 不做（后续可迭代）
- 评论/互动
- 任务归属（谁负责）
- 提醒推送
- 多人协作（团队场景）

---

## 界面布局示例

```
┌─────────────────────────────────────┐
│  我的 Todo                          │
├─────────────────────────────────────┤
│  + 新建任务  [标签: 工作 旅行]      │
│                                     │
│  □ 写代码          [工作]          │
│  ☑ 买菜            [家务] (灰色)   │
│  □ 洗衣服          [家务]          │
├─────────────────────────────────────┤
│  好友                              │
├─────────────────────────────────────┤
│  ▶ 小王 (3个任务)                  │
│  ▶ 小李 (1个任务)                  │
└─────────────────────────────────────┘

点击"小王"后展开：
┌─────────────────────────────────────┐
│  我的 Todo                          │
├─────────────────────────────────────┤
│  □ 写代码          [工作]          │
│  ☑ 买菜            [家务] (灰色)   │
│  □ 洗衣服          [家务]          │
├─────────────────────────────────────┤
│  好友                              │
├─────────────────────────────────────┤
│  ▼ 小王 (3个任务)                  │
│  ├─ □ 订机票       [旅行]          │
│  ├─ ☑ 订酒店       [旅行] (灰色)   │
│  └─ □ 订餐厅       [旅行]          │
│  ▶ 小李 (1个任务)                  │
└─────────────────────────────────────┘
```

---

## 用户流程示例

**场景：A 和 B 一起规划旅行**

1. A 和 B 互相添加为好友（发送请求 → 确认）
2. A 创建标签"旅行"
3. A 打开主界面，看到个人任务 + 好友列表（B 折叠）
4. A 点击 B 的名字，展开两人共享看板
5. A 在共享看板创建任务"订机票"，打标签"旅行"
6. B 打开主界面，看到 A 的共享看板展开，显示"订机票 [旅行]"
7. B 在共享看板创建任务"订酒店"，打标签"旅行"
8. A 实时看到"订酒店 [旅行]"出现在共享看板
9. A 将"订机票"标记为"已完成"，任务变灰色，移到列表底部
10. B 实时看到"订机票"变灰色，排在后面

---

*确认无误后，我们就派给 Claude Code 开发。*
